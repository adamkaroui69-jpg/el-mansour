<Window x:Class="ElMansourSyndicManager.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="El Mansour Syndic Manager - Connexion"
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        KeyDown="Window_KeyDown"
        Icon="/Assets/logo.png">
    
    <Window.Resources>
        <!-- Animation pour l'apparition -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0" To="1" Duration="0:0:0.5"/>
        </Storyboard>
    </Window.Resources>
    
    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource FadeIn}"/>
        </EventTrigger>
    </Window.Triggers>
    
    <Border CornerRadius="20" Background="White">
        <Border.Effect>
            <DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="30" ShadowDepth="0"/>
        </Border.Effect>
        
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Partie gauche - Image/Branding (Style Clean & Moderne) -->
            <Border Grid.Column="0" CornerRadius="20,0,0,20" Background="#F8F9FA">
                <Grid>
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="40">
                        <!-- Logo (Directement sur fond clair pour une netteté maximale) -->
                        <Image Source="/Assets/logo.png" 
                               Width="280" 
                               Height="280" 
                               HorizontalAlignment="Center"
                               Margin="0,0,0,30"
                               RenderOptions.BitmapScalingMode="HighQuality">
                            <Image.Effect>
                                <DropShadowEffect Color="#1A237E" Opacity="0.1" BlurRadius="20" ShadowDepth="5"/>
                            </Image.Effect>
                        </Image>
                        
                        <TextBlock Text="Résidence El Mansour"
                                 FontSize="32"
                                 FontWeight="Bold"
                                 Foreground="#1A237E"
                                 TextAlignment="Center"
                                 Margin="0,0,0,8"/>
                        
                        <TextBlock Text="Gestion Moderne de Syndic"
                                 FontSize="18"
                                 Foreground="#5C6BC0"
                                 TextAlignment="Center"/>
                        
                        <!-- Caractéristiques -->
                        <StackPanel Margin="0,50,0,0">
                            <StackPanel Orientation="Horizontal" Margin="0,10">
                                <Border Background="#E8EAF6" CornerRadius="50" Padding="4" Margin="0,0,12,0">
                                    <materialDesign:PackIcon Kind="Check" Foreground="#1A237E" Width="16" Height="16"/>
                                </Border>
                                <TextBlock Text="Gestion des paiements simplifiée" 
                                         Foreground="#455A64" 
                                         FontSize="15"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,10">
                                <Border Background="#E8EAF6" CornerRadius="50" Padding="4" Margin="0,0,12,0">
                                    <materialDesign:PackIcon Kind="Check" Foreground="#1A237E" Width="16" Height="16"/>
                                </Border>
                                <TextBlock Text="Rapports financiers automatisés" 
                                         Foreground="#455A64" 
                                         FontSize="15"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                            

                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Partie droite - Formulaire -->
            <Grid Grid.Column="1">
                <!-- Bouton fermer -->
                <Button Style="{StaticResource MaterialDesignIconButton}"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Top"
                       Margin="16"
                       Click="CloseButton_Click">
                    <materialDesign:PackIcon Kind="Close" Width="24" Height="24"/>
                </Button>
                
                <StackPanel VerticalAlignment="Center" 
                           HorizontalAlignment="Center" 
                           Width="350"
                           Margin="60">
                    
                    <!-- En-tête du formulaire -->
                    <TextBlock Text="Bienvenue !"
                             FontSize="36"
                             FontWeight="Bold"
                             Foreground="#1A237E"
                             Margin="0,0,0,8"/>
                    
                    <TextBlock Text="Connectez-vous pour continuer"
                             FontSize="14"
                             Foreground="#666"
                             Margin="0,0,0,40"/>

                    <!-- Champ Code Maison -->
                    <Border Background="#F5F5F5" 
                           CornerRadius="10" 
                           Padding="16,12"
                           Margin="0,0,0,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <materialDesign:PackIcon Kind="Home" 
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Foreground="#FF6F00"
                                                   Margin="0,0,12,0"/>
                            
                            <TextBox Grid.Column="1"
                                   materialDesign:HintAssist.Hint="Code Maison"
                                   Text="{Binding HouseCode, UpdateSourceTrigger=PropertyChanged}"
                                   BorderThickness="0"
                                   Background="Transparent"
                                   FontSize="14"
                                   VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- Champ Mot de passe -->
                    <Border Background="#F5F5F5" 
                           CornerRadius="10" 
                           Padding="16,12"
                           Margin="0,0,0,24">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <materialDesign:PackIcon Kind="Lock" 
                                                   Grid.Column="0"
                                                   VerticalAlignment="Center"
                                                   Foreground="#FF6F00"
                                                   Margin="0,0,12,0"/>
                            
                            <PasswordBox x:Name="PasswordBox"
                                       Grid.Column="1"
                                       materialDesign:HintAssist.Hint="Code (6 chiffres)"
                                       BorderThickness="0"
                                       Background="Transparent"
                                       FontSize="14"
                                       VerticalAlignment="Center"
                                       PasswordChanged="PasswordBox_PasswordChanged"/>
                        </Grid>
                    </Border>

                    <!-- Bouton de connexion -->
                    <Button Content="SE CONNECTER"
                           Command="{Binding LoginCommand}"
                           Height="50"
                           FontSize="14"
                           FontWeight="Bold"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#FF6F00" Offset="0"/>
                                            <GradientStop Color="#FF8F00" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Opacity" Value="0.9"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Message d'erreur -->
                    <Border Background="#FFEBEE" 
                           CornerRadius="8" 
                           Padding="12"
                           Margin="0,16,0,0"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="AlertCircle" 
                                                   Foreground="#D32F2F"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,8,0"/>
                            <TextBlock Text="{Binding ErrorMessage}"
                                     Foreground="#D32F2F"
                                     TextWrapping="Wrap"
                                     VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Indicateur de chargement -->
                    <ProgressBar IsIndeterminate="True"
                               Height="4"
                               Margin="0,16,0,0"
                               Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <ProgressBar.Foreground>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#FF6F00" Offset="0"/>
                                <GradientStop Color="#FF8F00" Offset="1"/>
                            </LinearGradientBrush>
                        </ProgressBar.Foreground>
                    </ProgressBar>


                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
